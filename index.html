<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Happy Valentine‚Äôs Day üíñ</title>

<style>
html, body {
    margin: 0;
    padding: 0;
    background: black;
    overflow: hidden;
    font-family: 'Segoe UI', sans-serif;
    color: white;
}

canvas {
    position: fixed;
    top: 0;
    left: 0;
}

/* CENTER */
.center {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    z-index: 10;
}

.hidden { display: none; }

/* HEART */
.heart {
    font-size: 120px;
    animation: beat 1.5s infinite;
}

@keyframes beat {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

/* BUTTON */
button {
    padding: 15px 35px;
    border-radius: 30px;
    border: none;
    background: linear-gradient(45deg, pink, hotpink);
    font-size: 18px;
    cursor: pointer;
    margin-top: 20px;
}

/* BOUQUET */
.bouquet {
    font-size: 90px;
    animation: bloom 3s ease-in-out infinite;
}

@keyframes bloom {
    0% { transform: scale(0.85); }
    50% { transform: scale(1.1); }
    100% { transform: scale(0.85); }
}

/* FLOATING HEARTS */
.float-heart {
    position: absolute;
    font-size: 24px;
    animation: floatUp 7s linear forwards;
}

@keyframes floatUp {
    from { transform: translateY(0); opacity: 1; }
    to { transform: translateY(-900px); opacity: 0; }
}

/* TYPING MESSAGE */
.typing {
    font-size: 34px;
    color: pink;
    margin-top: 20px;
    min-height: 80px;
}
</style>
</head>

<body>

<canvas id="canvas"></canvas>
<audio id="music" src="music.mp3" loop></audio>

<!-- STAGE 1 -->
<div id="stage1" class="center">
    <div class="heart">‚ù§Ô∏è</div>
    <h2>For Someone Special</h2>
    <button onclick="startSurprise()">Click for a Surprise üíñ</button>
</div>

<!-- STAGE 2 -->
<div id="stage2" class="center hidden">
    <div class="bouquet">üíê</div>
    <div id="typing" class="typing"></div>
</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

/* ===== CUSTOM TEXT ===== */
const heartText = "Jhong ‚ù§Ô∏è Anden";
const message = "Happy Valentine‚Äôs Day Palangga qoh ‚ù§Ô∏è";

/* ===== PARTICLES ===== */
class Particle {
    constructor(x, y, tx, ty) {
        this.x = x;
        this.y = y;
        this.tx = tx;
        this.ty = ty;
        this.life = 120;
        this.size = 2;
        this.color = "pink";
    }
    update() {
        this.x += (this.tx - this.x) * 0.06;
        this.y += (this.ty - this.y) * 0.06;
        this.life--;
    }
    draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fillStyle = this.color;
        ctx.fill();
    }
}

let particles = [];

/* ===== HEART TEXT FIREWORK ===== */
function createHeartText() {
    particles = [];
    ctx.clearRect(0,0,canvas.width,canvas.height);

    ctx.font = "bold 80px Segoe UI";
    ctx.textAlign = "center";
    ctx.fillText(heartText, canvas.width/2, canvas.height/2);

    const data = ctx.getImageData(0,0,canvas.width,canvas.height).data;

    for (let y = 0; y < canvas.height; y += 6) {
        for (let x = 0; x < canvas.width; x += 6) {
            const i = (y * canvas.width + x) * 4;
            if (data[i + 3] > 150) {
                const angle = Math.random() * Math.PI * 2;
                const r = 150;
                const sx = canvas.width/2 + Math.cos(angle) * r;
                const sy = canvas.height/2 + Math.sin(angle) * r;
                particles.push(new Particle(sx, sy, x, y));
            }
        }
    }
}

/* ===== HEART-SHAPED FIREWORK ===== */
function heartFirework(x, y) {
    for (let t = 0; t < Math.PI * 2; t += 0.15) {
        const hx = 16 * Math.pow(Math.sin(t), 3);
        const hy = -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
        const px = x + hx * 10;
        const py = y + hy * 10;
        particles.push(new Particle(px, py, px, py));
    }
}

/* ===== ANIMATION LOOP ===== */
function animate() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    particles = particles.filter(p => p.life > 0);
    particles.forEach(p => {
        p.update();
        p.draw();
    });
    requestAnimationFrame(animate);
}
animate();

/* AUTO FIREWORKS */
setInterval(() => {
    heartFirework(Math.random() * canvas.width, Math.random() * canvas.height / 1.5);
}, 1800);

/* ===== FLOATING HEARTS ===== */
function floatingHearts() {
    setInterval(() => {
        const h = document.createElement("div");
        h.className = "float-heart";
        h.innerHTML = "‚ù§Ô∏è";
        h.style.left = Math.random() * window.innerWidth + "px";
        h.style.bottom = "0px";
        document.body.appendChild(h);
        setTimeout(() => h.remove(), 7000);
    }, 350);
}

/* ===== TYPING EFFECT ===== */
let index = 0;
function typeMessage() {
    const typing = document.getElementById("typing");
    if (index < message.length) {
        typing.innerHTML += message.charAt(index);
        index++;
        setTimeout(typeMessage, 100);
    }
}

/* ===== START ===== */
function startSurprise() {
    document.getElementById("stage1").classList.add("hidden");
    document.getElementById("stage2").classList.remove("hidden");
    document.getElementById("music").play();
    floatingHearts();
    typeMessage();
    createHeartText();
}
</script>

</body>
</html>
